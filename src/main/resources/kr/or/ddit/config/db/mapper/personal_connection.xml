<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="personal">

	<!-- 일촌 리스트 조회 -->
	<select id="select_connections" parameterType="memberVo" resultType="personalVo">
		select
			user_id
		from
			personal_connection
		where
			(user_id = #{mem_id} or receive_id = #{mem_id})
		and
			receive_accept='Y'
		and
			user_id != #{mem_id}
		union
		select
			receive_id
		from
			personal_connection
		where
			(user_id = #{mem_id} or receive_id = #{mem_id})
		and
			receive_accept='Y'
		and
			receive_id != #{mem_id}
	</select>
	
	
	<!-- 일촌 수 조회 -->
	<select id="connections_count" parameterType="memberVo" resultType="int">
		select
			count(*)
		from
			personal_connection
		where
			(user_id=#{mem_id} or receive_id=#{mem_id})
		and
			receive_accept='Y'
	</select>




</mapper>