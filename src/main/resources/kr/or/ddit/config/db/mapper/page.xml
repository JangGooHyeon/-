<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="page">

	<!-- 섹션 추가 -->
	<insert id="insert_page" parameterType="pageVo">
	
		<selectKey keyProperty="page_code" resultType="String" order="AFTER">
		  	select 
		  		page_code_seq.currval
		  	from 
		  		dual
		</selectKey>
		
		insert into page
		values (
			page_code_seq.nextval,
			#{section_code},
			#{page_title},
			#{page_contents},
			sysdate,
			0,
			#{page_thumbnail}
		)
	</insert>
	
	<!-- 섹션의 전체 페이지 조뢰 조회 -->
	<select id="select_pageList" parameterType="String" resultType="pageVo">
		select page_code, section_code, page_title, page_contents, write_date, view_count, page_thumbnail
		  from page
		 where section_code = #{ section_code }
		 order by write_date
	</select>
	
	<!-- 섹션의 전체 페이지 조뢰 조회 -->
	<select id="select_pageInfo" parameterType="String" resultType="pageVo">
		select page_code, section_code, page_title, page_contents, write_date, view_count, page_thumbnail
		  from page
		 where page_code = #{ page_code }
	</select>
	
	
</mapper> 